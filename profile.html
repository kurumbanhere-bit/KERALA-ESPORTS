<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile - KERALA ESPORTS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body { margin: 0; font-family: 'Segoe UI', sans-serif; background: white; color: #333; }
.top-bar { display: flex; align-items: center; padding: 15px; font-weight: bold; font-size: 18px; border-bottom: 1px solid #f0f0f0; }
.top-bar i { margin-right: 15px; cursor: pointer; font-size: 20px; color: #0fa958; }
.profile-main { text-align: center; padding: 30px 0; }
.profile-img { width: 110px; height: 110px; border-radius: 50%; object-fit: cover; background: #eee; border: 2px solid #0fa958; }
.username-text { font-size: 22px; font-weight: bold; margin-top: 10px; color: #222; }
.view-profile-btn { color: #888; font-size: 13px; margin-top: 4px; }
.menu-list { padding: 0 20px; }
.menu-item { 
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px; border: 1px solid #f5f5f5; border-radius: 12px;
    margin-bottom: 12px; cursor: pointer; background: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.02);
}
.menu-left { display: flex; align-items: center; gap: 15px; }
.menu-left i { font-size: 18px; color: #555; width: 25px; }
.menu-item span { font-weight: 500; font-size: 15px; color: #444; }
.arrow-right { color: #ccc; font-size: 13px; }
/* Version color maatti, display hidden aakkanam ennu thonniyal namukk maattam */
.version-info { text-align: center; color: #eee; font-size: 12px; margin-top: 40px; } 
</style>
</head>
<body>

<div class="top-bar">
    <i class="fa-solid fa-arrow-left" onclick="window.location.href='dashboard.html'"></i>
    Profile
</div>

<div class="profile-main">
    <img id="userImg" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="profile-img">
    <div id="uName" class="username-text">Loading...</div>
    <div class="view-profile-btn">View Profile</div>
</div>

<div class="menu-list">
    <div class="menu-item" onclick="window.location.href='settings.html'">
        <div class="menu-left">
            <i class="fa-regular fa-user"></i>
            <span>Account Settings</span>
        </div>
        <i class="fa-solid fa-chevron-right arrow-right"></i>
    </div>

    <div class="menu-item" onclick="window.location.href='join-private.html'">
        <div class="menu-left">
            <i class="fa-solid fa-trophy"></i>
            <span>Join Private Tournament</span>
        </div>
        <i class="fa-solid fa-chevron-right arrow-right"></i>
    </div>

    <div class="menu-item" onclick="window.location.href='create-private.html'">
        <div class="menu-left">
            <i class="fa-solid fa-plus-circle"></i>
            <span>Create Private Tournament</span>
        </div>
        <i class="fa-solid fa-chevron-right arrow-right"></i>
    </div>

    <div class="menu-item" onclick="window.open('https://t.me/keralaesport', '_blank')">
        <div class="menu-left">
            <i class="fa-regular fa-circle-question"></i>
            <span>Customer Support</span>
        </div>
        <i class="fa-solid fa-chevron-right arrow-right"></i>
    </div>
</div>

<div class="version-info">Version 1.0.3</div>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyBrHcONT6y0he3fzrtRGqdQMZfIMpGxcNo",
 authDomain: "kl-esports.firebaseapp.com",
 databaseURL: "https://kl-esports-default-rtdb.firebaseio.com",
 projectId: "kl-esports",
 storageBucket: "kl-esports.appspot.com",
 messagingSenderId: "440301376580",
 appId: "1:440301376580:web:fb0b8ae0df3fe096bd1811"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

auth.onAuthStateChanged(user => {
    if(user) {
        db.ref("users").on('value', snapshot => {
            const allUsers = snapshot.val();
            let myData = null;
            for (let key in allUsers) {
                if (key.includes(user.uid)) { myData = allUsers[key]; break; }
            }
            if(myData) {
                document.getElementById("uName").innerText = myData.username || "User";
                document.getElementById("userImg").src = myData.profilePic || "https://cdn-icons-png.flaticon.com/512/149/149071.png";
            }
        });
    } else {
        window.location.href = "login.html";
    }
});
</script>
</body>
</html>
