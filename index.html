<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KERALA ESPORTS - Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- FIREBASE SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{
 margin:0;
 font-family:Arial;
 background:#fff;
}
.container{
 max-width:400px;
 margin:auto;
 padding:25px;
}
h1,h2{
 color:#0fa958;
}
.input-box{
 background:#f3f3f3;
 padding:15px;
 border-radius:30px;
 margin-bottom:20px;
 position:relative;
}
.input-box input{
 border:none;
 background:none;
 width:100%;
 font-size:16px;
 outline:none;
}
.show-pass{
 position:absolute;
 right:15px;
 top:50%;
 transform:translateY(-50%);
 cursor:pointer;
 color:#0fa958;
 font-weight:bold;
 font-size:14px;
}
.btn{
 width:100%;
 padding:15px;
 border:none;
 border-radius:30px;
 background:#0fa958;
 color:white;
 font-size:18px;
 font-weight:bold;
 cursor:pointer;
}
#error{
 text-align:center;
 margin-top:15px;
 font-weight:bold;
}
.forgot{
 text-align:right;
 color:#0fa958;
 font-size:14px;
 cursor:pointer;
 margin-bottom:15px;
}
.or-text{
 text-align:center;
 margin:20px 0;
}
.support-icon{
 text-align:center;
}
.support-icon i{
 font-size:40px;
 color:#0fa958;
}
.signup{
 text-align:center;
 margin-top:25px;
}
.signup span{
 color:#0fa958;
 font-weight:bold;
 cursor:pointer;
}

/* POPUP */
.popup{
 position:fixed;
 top:0;left:0;
 width:100%;
 height:100%;
 background:rgba(0,0,0,0.5);
 display:none;
 justify-content:center;
 align-items:center;
}
.popup-box{
 background:#fff;
 width:300px;
 padding:25px;
 border-radius:20px;
 text-align:center;
 position:relative;
}
.close{
 position:absolute;
 top:10px;
 right:15px;
 font-size:20px;
 cursor:pointer;
 color:red;
}
</style>
</head>

<body>

<div class="container">

<h1>Welcome to</h1>
<h2>KERALA ESPORTS</h2>

<div class="input-box">
<input type="email" id="email" placeholder="Email">
</div>

<div class="input-box">
<input type="password" id="password" placeholder="Password">
<span class="show-pass" onclick="toggleLoginPass()">SHOW</span>
</div>

<div class="forgot" onclick="openReset()">Forgot Password?</div>

<button class="btn" onclick="login()">LOGIN</button>

<div id="error"></div>

<div class="or-text">Custom Support</div>

<div class="support-icon">
<a href="https://t.me/keralaesport">
<i class="fa-brands fa-telegram"></i>
</a>
</div>

<div class="signup">
Don't have an account?
<span onclick="goSignup()">Sign Up</span>
</div>

</div>

<!-- RESET POPUP -->
<div class="popup" id="resetPopup">
<div class="popup-box">

<div class="close" onclick="closeReset()">âœ–</div>

<h3>Reset Password</h3>

<input type="email" id="resetEmail" placeholder="Enter your email"
style="width:100%;padding:12px;border-radius:25px;border:1px solid #ccc;">

<br><br>

<button class="btn" onclick="resetPassword()">SEND</button>

<div id="resetMsg"></div>

</div>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
 apiKey: "AIzaSyBrHcONT6y0he3fzrtRGqdQMZfIMpGxcNo",
 authDomain: "kl-esports.firebaseapp.com",
 projectId: "kl-esports",
 storageBucket: "kl-esports.appspot.com",
 messagingSenderId: "440301376580",
 appId: "1:440301376580:web:fb0b8ae0df3fe096bd1811"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

/* AUTO LOGIN CHECK */
auth.onAuthStateChanged(user=>{
 if(user){
   // User already logged in
   window.location.href="dashboard.html";
 }
});

/* SHOW/HIDE PASSWORD */
function toggleLoginPass(){
 let p=document.getElementById("password");
 let s=document.querySelector(".show-pass");
 if(p.type==="password"){
   p.type="text";
   s.innerText="HIDE";
 }else{
   p.type="password";
   s.innerText="SHOW";
 }
}

/* NAVIGATION */
function goSignup(){
 window.location.href="signup.html";
}

/* LOGIN */
function login(){

let email=document.getElementById("email").value.trim();
let pass=document.getElementById("password").value.trim();
let error=document.getElementById("error");

error.style.color="red";

if(email=="" || pass==""){
 error.innerHTML="Enter email and password";
 return;
}

error.style.color="green";
error.innerHTML="Logging in...";

auth.signInWithEmailAndPassword(email,pass)
.then(()=>{
 error.innerHTML="Login successful âœ”";
 setTimeout(()=>{
   window.location.href="dashboard.html";
 },1000);
})
.catch((err)=>{
 error.style.color="red";
 // Specific Firebase errors
 if(err.code==="auth/wrong-password"){
   error.innerHTML="Wrong password";
 }else if(err.code==="auth/user-not-found"){
   error.innerHTML="Email not registered";
 }else{
   error.innerHTML="Login failed, try again";
 }
});

}

/* OPEN RESET */
function openReset(){
 document.getElementById("resetPopup").style.display="flex";
}

/* CLOSE RESET */
function closeReset(){
 document.getElementById("resetPopup").style.display="none";
}

/* RESET PASSWORD */
function resetPassword(){

let email=document.getElementById("resetEmail").value.trim();
let msg=document.getElementById("resetMsg");

msg.style.color="red";

if(email==""){
 msg.innerHTML="Enter your email";
 return;
}

msg.style.color="green";
msg.innerHTML="Sending reset link...";

auth.sendPasswordResetEmail(email)
.then(()=>{
 msg.innerHTML="Password reset link sent to your email âœ”";
})
.catch((err)=>{
 msg.style.color="red";
 if(err.code==="auth/user-not-found"){
   msg.innerHTML="Email not registered";
 }else{
   msg.innerHTML="Failed to send reset link";
 }
});

}
</script>

</body>
</html>